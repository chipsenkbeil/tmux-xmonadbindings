# =============================================================================
# = MAIN TMUX CONFIGURATION FILE
# =============================================================================
# = Written by Robert "Chip" Senkbeil
# = Version 1.0
# =============================================================================

# =============================================================================
# = MAIN DISPLAY SETTINGS
# =============================================================================

# Automatically set window title
set-window-option -g automatic-rename on
set-option -g set-titles on

set -g default-terminal screen-256color
set -g status-keys vi
set -g history-limit 10000
 
setw -g mode-keys vi
setw -g mode-mouse on
setw -g monitor-activity on

set-window-option -g xterm-keys on

# =============================================================================
# = XMONAD MOUSE SUPPORT
# =============================================================================

set -g mode-mouse on
set -g mouse-resize-pane on
set -g mouse-select-pane on
set -g mouse-select-window on

# =============================================================================
# = XMONAD KEY BINDINGS
# =============================================================================

# NOTE: Cannot bind to Alt since it just modifies keycodes, if someone
#       knows how to bind to Alt, let me know!
#unbind-key -a
set-option -g prefix C-b

# (Mask-Shift-Return): Launch a new pane
# NOTE: tmux does not support detecting Shift-Return
# (Mask-Return): Swap focused pane and master pane, not providing destination
#                swaps the current pane and pane 0, and -d keeps old focus
# NOTE: Assuming master pane is always index 0
bind-key Enter if-shell 'test `uname` == "DARWIN"' 'display-message "WORKS"' 'swap-pane -d -s 0'

# (Mask-p): Launch dmenu
bind-key p run-shell "dmenu"

# (Mask-Shift-p): Launch gmrun
bind-key S-p run-shell "gmrun"

# (Mask-Shift-c): Close focused pane
# NOTE: tmux does not support detecting Shift-c
bind-key S-c kill-pane

# (Mask-Space): Change layout to next layout
bind-key Space next-layout

# (Mask-Shift-Space): Reset to default layout
# NOTE: tmux does not support detecting Shift-Space
bind-key S-Space select-layout main-vertical

# (Mask-n): Resize panes to correct size
# NO OPTION WRITTEN!

# (Mask-Tab): Move to next pane
bind-key Tab select-pane -t :.+

# (Mask-Shift-Tab): Move to previous pane
# NOTE: tmux does not support detecting Shift-Tab
bind-key S-Tab select-pane -t :.-

# (Mask-j): Move to next pane
bind-key j select-pane -t :.+

# (Mask-k): Move to previous pane
bind-key k select-pane -t :.-

# (Mask-m): Move focus to master pane
# NOTE: I never use this, so assuming this would be a case like the left
#       pane in the vertical layout, so using index 0 to match that scenario
bind-key m select-pane -t 0


# (Mask-Shift-j): Swap focused pane with next pane
# NOTE: tmux does not support detecting Shift-j
bind-key S-j swap-pane -D

# (Mask-Shift-k): Swap focused pane with previous pane
# NOTE: tmux does not support detecting Shift-k
bind-key S-k swap-pane -U

# (Mask-h): Shrink the master pane
# NO OPTION WRITTEN!

# (Mask-l): Expand the master pane
# NO OPTION WRITTEN!

# (Mask-t): Pushes a pane back into the tiling
# NOTE: Assuming that this pushes a floating window back into the XMonad
#       tiling; so, nothing to be done here since tmux doesn't have floats
# NOTE: Not supported!

# (Mask-comma): Increment number of panes in the master area
# NOTE: Not supported!

# (Mask-period): Decrement the number of panes in the master area
# NOTE: Not supported!

# (Mask-Shift-q): "Quit xmonad", or quit our tmux session
# NOTE: tmux does not support detecting Shift-q
bind-key S-q kill-session

# (Mask-q): "Restart xmonad", or reload our tmux bindings
bind-key q source-file ~/.tmux.conf \; \
           display-message "Reloaded tmux"

# (Mask-Shift-slash): Display the current tmux key bindings
bind-key S-/ list-keys

# (Mask-[1..9]): Switch to window N
bind-key 1 select-window -t :1
bind-key 2 select-window -t :2
bind-key 3 select-window -t :3
bind-key 4 select-window -t :4
bind-key 5 select-window -t :5
bind-key 6 select-window -t :6
bind-key 7 select-window -t :7
bind-key 8 select-window -t :8
bind-key 9 select-window -t :9

# (Mask-Shift-[1..9]): Move pane to window N
# NOTE: Like XMonad, we do not switch to the new workspace, although this
#       will automatically happen if all panes are moved to the new window
# TODO: Figure out why only binding 1 works
bind-key S-1 join-pane -d -t :1
bind-key S-2 join-pane -d -t :2
bind-key S-3 join-pane -d -t :3
bind-key S-4 join-pane -d -t :4
bind-key S-5 join-pane -d -t :5
bind-key S-6 join-pane -d -t :6
bind-key S-7 join-pane -d -t :7
bind-key S-8 join-pane -d -t :8
bind-key S-9 join-pane -d -t :9

# (Mask-{w,e,r}): Switch to physical/Xinerama screens 1, 2, or 3
# NOTE: Not supported!

# (Mask-Shift-{w,e,r}): Move pane to screen 1, 2, or 3
# NOTE: Not supported!

# (Mask-button1): Set the pane to floating mode and move by dragging
# NOTE: Not supported!

# (Mask-button2): Raise the pane to the top of the stack
# NOTE: Not supported!

# (Mask-button3): Set the pane to floating mode and resize by dragging
# NOTE: Not supported!

